---
name: requirement-reader
description: 读取项目根目录下docs/requirement/对应模块文件夹中的需求文档。当用户要求阅读指定模块需求、查看需求规则、了解功能规范时使用。
---

# 需求文档阅读器

读取项目 `docs/requirement/<模块名>/` 目录下的需求文档，帮助理解模块的功能需求、业务规则和技术约束。

## 触发场景

- 用户说"阅读需求"、"查看需求"、"读取需求文档"
- 用户说"了解XX模块的需求"、"XX模块的规则是什么"
- 开发新功能前需要理解需求规范
- 用户说"需求"、"requirement"相关词汇

---

## Phase 1: 定位需求文档

### 1.1 确认目录结构

首先检查项目根目录下是否存在 `docs/requirement/` 目录：

```
使用 LS 工具查看: <项目根目录>/docs/requirement/
```

### 1.2 定位模块文件夹

根据用户指定的模块名，定位对应的文件夹：

| 用户输入 | 查找路径 |
|---------|---------|
| 模块名明确 | `docs/requirement/<模块名>/` |
| 模块名模糊 | 列出所有可用模块供用户选择 |
| 未指定模块 | 列出所有可用模块供用户选择 |

### 1.3 列出文档文件

使用 Glob 工具查找模块文件夹中的所有文档：

```
模式: docs/requirement/<模块名>/**/*.md
模式: docs/requirement/<模块名>/**/*.txt
```

---

## Phase 2: 阅读需求文档

### 2.1 阅读优先级

按以下优先级依次阅读文档：

1. **README.md** - 模块概述和入口文档
2. **index.md** - 索引文档
3. **其他 .md 文件** - 按字母顺序
4. **.txt 文件** - 补充说明

### 2.2 提取关键信息

阅读时重点关注以下内容：

| 信息类型 | 关注点 |
|---------|--------|
| 功能需求 | 模块要实现什么功能 |
| 业务规则 | 业务逻辑和约束条件 |
| 技术约束 | 技术限制、依赖、接口定义 |
| 数据结构 | 数据格式、字段说明 |
| 流程说明 | 操作流程、状态转换 |
| 边界情况 | 异常处理、特殊场景 |

### 2.3 代码示例处理

如果需求文档中包含代码示例：
- 理解代码的用途和上下文
- 记录API调用方式
- 注意参数和返回值说明

---

## Phase 3: 输出报告

### 3.1 报告模板

```markdown
## 需求阅读报告

### 1. 模块概述
- **模块名称**: [模块名]
- **文档路径**: [docs/requirement/模块名/]
- **文档数量**: [N个文件]

### 2. 功能需求
- [需求点1]
- [需求点2]
- ...

### 3. 业务规则
| 规则 | 说明 |
|------|------|
| 规则1 | 描述 |
| 规则2 | 描述 |

### 4. 技术约束
- [约束1]
- [约束2]

### 5. 关键接口/数据结构
[如有API或数据结构定义，列出关键信息]

### 6. 注意事项
- [边界情况1]
- [特殊处理1]
```

---

## 边界情况处理

### 情况1: docs/requirement/ 目录不存在

```
提示: 项目根目录下未找到 docs/requirement/ 目录。
建议: 
1. 确认当前是否在正确的项目目录
2. 检查需求文档是否存放在其他位置
```

### 情况2: 指定模块不存在

```
提示: 未找到模块 [模块名] 的需求文档。
可用模块列表:
- 模块A
- 模块B
- ...
请选择一个模块或检查模块名称。
```

### 情况3: 模块文件夹为空

```
提示: 模块 [模块名] 的需求文件夹为空，暂无需求文档。
```

### 情况4: 包含子文件夹

递归读取所有子文件夹中的文档，并在报告中标注文档层级结构。

---

## 与其他技能的配合

```
阅读需求 → [requirement-reader] 理解需求
    ↓
代码实现 → 根据需求开发功能
    ↓
遇到问题 → [legacy-code-bug-fixer] 修复Bug
    ↓
需要调试 → [debug-info-adder] 添加调试信息
```

---

## 使用示例

### 示例1: 阅读指定模块需求
```
用户: 阅读场景加载模块的需求
AI: 
1. 检查 docs/requirement/场景加载/ 目录
2. 读取目录下所有文档
3. 输出需求报告
```

### 示例2: 查看所有可用模块
```
用户: 有哪些需求文档
AI:
1. 列出 docs/requirement/ 下所有子文件夹
2. 展示可用模块列表
```

### 示例3: 模糊查找
```
用户: 阅读UI相关的需求
AI:
1. 搜索包含"UI"关键词的模块文件夹
2. 列出匹配结果供用户选择
```
