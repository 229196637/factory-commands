# Code Comparator Skill (代码对比技能)

跨项目代码对比分析。当需要比较不同项目的实现方式、研究问题解决方案、分析代码差异时使用。

## Trigger Conditions (触发条件)

- 用户要求对比两个或多个项目的代码实现
- 研究某个功能在不同项目中的实现方式
- 分析代码差异和相似性
- 寻找最佳实践或参考实现
- 关键词：对比、比较、差异、compare、difference、vs

## Workflow (工作流程)

### Phase 1: 收集对比目标

**必须确认以下信息：**

1. **项目路径**：要对比的项目绝对路径
2. **对比范围**：具体的功能/模块/文件
3. **对比维度**：
   - 结构对比（文件组织、模块划分）
   - 实现对比（算法、逻辑流程）
   - API对比（接口设计、参数差异）
   - 模式对比（设计模式、代码风格）

**示例问题：**
```
请提供以下信息：
1. 项目A路径：
2. 项目B路径：
3. 要对比的功能/模块：
4. 关注的对比维度：
```

### Phase 2: 代码读取

**使用工具定位和读取代码：**

```
1. Glob - 定位相关文件
   - 搜索模式：**/*.lua, **/*.py, **/*.js 等
   - 按功能模块筛选

2. Grep - 搜索关键实现
   - 搜索函数名、类名、关键逻辑
   - 定位核心代码位置

3. Read - 读取代码内容
   - 读取定位到的文件
   - 提取关键代码段
```

### Phase 3: 对比分析

**分析维度：**

| 维度 | 分析内容 |
|------|----------|
| 结构 | 文件组织、目录结构、模块划分 |
| 实现 | 算法选择、逻辑流程、数据结构 |
| API | 接口设计、参数定义、返回值 |
| 模式 | 设计模式、代码风格、命名规范 |
| 依赖 | 外部库、内部模块依赖关系 |

### Phase 4: 输出报告

**标准报告格式：**

```markdown
## 代码对比报告

### 对比目标
- **项目A**: [名称] - [路径]
- **项目B**: [名称] - [路径]
- **对比范围**: [功能/模块描述]
- **对比维度**: [结构/实现/API/模式]

### 相似点

| 方面 | 项目A | 项目B | 说明 |
|------|-------|-------|------|
| [方面1] | [实现] | [实现] | [相似原因] |

### 差异点

| 方面 | 项目A | 项目B | 分析 |
|------|-------|-------|------|
| [方面1] | [实现] | [实现] | [差异原因及影响] |

### 代码片段对比

**项目A - [文件路径]:**
\`\`\`[语言]
[代码片段]
\`\`\`

**项目B - [文件路径]:**
\`\`\`[语言]
[代码片段]
\`\`\`

### 总结与建议

1. **优势对比**: [哪个项目在哪方面更优]
2. **可借鉴点**: [可以相互学习的地方]
3. **改进建议**: [基于对比的改进方向]
```

## Edge Cases (边界情况)

### 不同编程语言
- 标注语言差异
- 聚焦逻辑和设计对比
- 忽略语法层面的差异

### 文件不存在
- 报告缺失的文件
- 继续对比可用部分
- 建议用户确认路径

### 大型代码库
- 要求用户指定具体模块或文件范围
- 分批次进行对比
- 优先对比核心功能

### 版本差异
- 确认对比的是否为同一功能的不同版本
- 标注版本信息
- 关注变更历史

## Examples (使用示例)

### 示例1：对比两个项目的登录功能

```
用户：帮我对比项目A和项目B的登录功能实现

助手：
1. 确认项目路径和登录模块位置
2. 使用Glob定位登录相关文件
3. 读取并分析两边的实现
4. 输出对比报告
```

### 示例2：研究某个API的不同实现

```
用户：我想看看不同项目是怎么实现文件上传的

助手：
1. 确认要对比的项目
2. 搜索文件上传相关代码
3. 分析实现差异
4. 总结最佳实践
```

## Notes (注意事项)

- 对比前先了解两个项目的整体架构
- 关注核心逻辑，忽略无关细节
- 保持客观，不偏向任何一方
- 提供可操作的改进建议
