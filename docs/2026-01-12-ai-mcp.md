## AI进度可视化管理MCP 实现方案

### 目标
基于现有 `oh-my-task-mcp` 项目，添加可视化 Web 界面，展示任务状态机的树形结构和执行进度（类似您提供的截图效果）。

### 技术方案

**前端技术栈：**
- **React 18** + **TypeScript** - 组件化开发
- **Vite** - 快速构建工具
- **CSS-in-JS (styled-components)** - 样式管理
- **React Flow** 或 **自定义 SVG** - 绘制任务流程图和连接线

**后端扩展：**
- 在现有 MCP Server 基础上添加 **Express HTTP API**
- 提供 REST API 供前端调用

### 文件结构

```
oh-my-task-mcp/
├── src/                          # 现有 MCP 代码
│   ├── index.ts
│   ├── services/
│   ├── models/
│   ├── tools/
│   └── api/                      # 新增: HTTP API 路由
│       └── routes.ts
├── web/                          # 新增: 前端项目
│   ├── src/
│   │   ├── App.tsx
│   │   ├── main.tsx
│   │   ├── components/
│   │   │   ├── TaskTree.tsx      # 任务树组件
│   │   │   ├── TaskNode.tsx      # 任务节点组件
│   │   │   ├── TaskFlow.tsx      # 流程连接线
│   │   │   ├── ProgressBar.tsx   # 进度条
│   │   │   └── StatusBadge.tsx   # 状态标签
│   │   ├── hooks/
│   │   │   └── useTaskData.ts    # 数据获取 Hook
│   │   └── styles/
│   │       └── theme.ts          # 深色主题样式
│   ├── index.html
│   ├── vite.config.ts
│   └── package.json
└── package.json                  # 更新: 添加启动脚本
```

### 核心功能

1. **任务树视图** - 左侧显示模块列表（类似截图左栏）
   - 显示完成进度 (如 "完成 1/9")
   - 每个任务节点显示状态图标 (✓/运行中/待处理)
   - 支持展开/折叠

2. **任务流程图** - 右侧显示当前模块的阶段流程（类似截图右栏）
   - 显示阶段之间的连接线和箭头
   - 不同状态用不同颜色区分（绿色=完成，红色=进行中，灰色=待处理）

3. **实时更新** - 轮询或 WebSocket 获取最新状态

### API 端点

| 端点 | 方法 | 说明 |
|------|------|------|
| `/api/v1/tasks/running` | GET | 获取运行中任务列表 |
| `/api/v1/tasks/:id/tree` | GET | 获取任务树结构 |
| `/api/v1/tasks/:id/execution` | GET | 获取执行状态 |

### 实现步骤

1. **扩展后端** - 在 `src/api/routes.ts` 添加 Express HTTP 路由
2. **创建前端项目** - 在 `web/` 目录初始化 Vite + React 项目
3. **实现核心组件** - TaskTree、TaskNode、TaskFlow
4. **样式设计** - 深色主题，参考截图风格
5. **集成测试** - 确保前后端联调正常

### 启动方式

```bash
# 启动 MCP Server + HTTP API
npm run start

# 启动前端开发服务器
npm run web:dev

# 或一键启动
npm run dev:all
```

### 预估工作量

| 模块 | 预估时间 |
|------|----------|
| 后端 API 扩展 | 1-2 小时 |
| 前端项目搭建 | 1 小时 |
| 任务树组件 | 2-3 小时 |
| 流程图组件 | 2-3 小时 |
| 样式和主题 | 1-2 小时 |
| 联调测试 | 1 小时 |

**总计: 约 8-12 小时**