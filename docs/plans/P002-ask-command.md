---
id: P002
title: Ask 咨询指令
status: completed
created: 2026-01-14
---

# Ask 咨询指令

## 概述
创建一个专门用于咨询的 `/ask` 指令。该指令的核心特性是**严禁进行任何文件编辑操作**，仅允许读取、搜索和分析代码，确保用户在咨询过程中不会意外修改任何文件。

## 技术方案

### 关键实现步骤
1. 在 `.factory/commands/` 目录下创建 `ask.md` 指令文件
2. 在指令中明确声明禁止使用的工具列表：
   - `Edit` - 禁止
   - `MultiEdit` - 禁止
   - `Create` - 禁止
   - 任何文件写入操作 - 禁止
3. 允许使用的工具：
   - `Read` - 允许读取文件
   - `Grep` - 允许搜索代码
   - `Glob` - 允许查找文件
   - `LS` - 允许列出目录
   - `WebSearch` - 允许网络搜索
   - `FetchUrl` - 允许获取网页内容
   - `Execute` (仅限只读命令) - 如 `git log`, `git status` 等

### 需要创建/修改的文件
- **新建**: `.factory/commands/ask.md` - Ask 咨询指令定义

### 指令设计
```markdown
/ask <问题或主题>
```

指令将：
1. 接收用户的咨询问题
2. 使用只读工具分析代码库
3. 提供详细的解答和建议
4. **绝不执行任何修改操作**

## 验收标准
- [ ] `/ask <问题>` 指令可正常执行
- [ ] 指令明确禁止所有编辑类工具的使用
- [ ] 能够正常使用读取、搜索类工具进行代码分析
- [ ] 回答问题时提供清晰、有帮助的信息
- [ ] 即使用户在问题中要求修改，也拒绝执行编辑操作

## 实现任务
1. 创建 `.factory/commands/ask.md` 指令文件
2. 定义禁止使用的工具列表
3. 定义允许使用的工具列表
4. 编写指令说明和使用示例

## 风险与注意事项
- 需要确保指令说明足够明确，让 AI 严格遵守"只读"限制
- Execute 工具需要特别限制，只允许执行只读命令（如 `git log`），禁止执行可能修改文件的命令
- 用户可能会尝试在问题中要求修改代码，指令需要明确拒绝此类请求
