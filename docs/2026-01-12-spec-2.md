## 技能提案：debug-info-adder

### 目的
当遇到陌生问题、无法直接从逻辑推断时，系统化地添加调试信息来定位问题。

### 位置
**Personal** (`C:\Users\unclefata\.factory\skills\debug-info-adder\`) - 跨项目通用的调试方法论

### 技能目录结构
```
debug-info-adder/
├── SKILL.md              # 主技能文件：调试信息添加策略和流程
└── patterns.md           # 常用调试模式和代码模板
```

### SKILL.md 核心内容

#### 1. 触发场景
- 无法直接从逻辑推断问题原因
- 变量值不明确，需要打印确认
- 调用链不清晰，需要堆栈跟踪
- 时序问题，需要时间戳追踪

#### 2. 调试信息添加策略

**策略A: 单点调试** (简单问题)
```lua
print("[模块名] 变量名:", 变量值)
```

**策略B: 调用链追踪** (复杂问题)
```lua
print("[模块名] 函数入口, 参数:", ...)
print(debug.traceback())
```

**策略C: 时序追踪** (异步/时序问题)
```lua
print(string.format("[%s][帧%d] 事件: %s", os.date("%H:%M:%S"), 帧号, 描述))
```

#### 3. 调试点选择原则
1. **入口点**: 函数入口打印参数
2. **分支点**: if/else 分支打印条件值
3. **调用点**: 关键函数调用前后打印
4. **异常点**: 可能出错的位置打印状态

#### 4. 调试信息格式规范
```lua
-- 格式: [模块名] 描述: 值
print("[CResCtrl] 加载资源:", path)
print("[Camera] 位置变化:", x, y, z)
printerror("[模块名] 错误:", 错误信息)
```

#### 5. 调试完成后清理
- 标记调试代码: `--DEBUG:`
- 问题解决后删除或注释
- 保留关键日志点

### patterns.md 核心内容
- 常用调试代码模板
- 不同场景的调试策略
- 调试输出格式示例

### 不包含的内容
- 日志分析（由 `spark-editor-log-analyzer` 处理）
- Bug修复方案（由 `legacy-code-bug-fixer` 处理）

### 与现有技能的关系
```
问题发现 → [debug-info-adder] 添加调试信息
    ↓
运行程序 → [spark-editor-log-analyzer] 分析日志
    ↓
定位问题 → [legacy-code-bug-fixer] 修复Bug
```

是否确认创建此技能？